<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" th:href="@{/img/favicon.ico}" />
	<link rel="stylesheet" th:href="@{/css/content.css}">
	<link rel="stylesheet" th:href="@{/css/board.css}">
	<!-- <script th:src="@{/js/content.js}"></script> -->
	<title>게시물</title>
</head>

<body>
	<article>
		<div class="subject_row">
			<h3 class="subject">
				<span class="subject_text">
					<span class="category_text" th:text="|[${contents.Cg.cgname}]|">[나이키]</span>
					<span class="subject_inner_text" th:text="${contents.subject}">아디다스 신발</span>
					<strong class="reply_count" th:text="|[${contents.comments.size}]|">[12]</strong>
				</span>
			</h3>
		</div>
		<hr>
		<div class="user_info">
			<img src="images/user_ico.png"> <span th:text="${contents.writer}">깃태식이</span>
			&nbsp;&nbsp;
			<img src="images/upload_time.png"> <span
				th:text="${#temporals.format(contents.rdate,'yy/MM/dd HH:mm')}">23/03/23 19:50</span>
		</div>
		<hr>
		<div class="board_main_view">
			<div class="content">
				<th:block th:each="contents:${contents}">
					<table>
						<tr>
							<td th:each="imgs:${contents.fileUp}" style="border: 1px solid red;">
								<img th:src="|/contentimages/${imgs.fileId}|"></img>
							</td>
						</tr>
					</table>
				</th:block>
				<br>
				<div th:text="${contents.contents}">
					게시글 내용
				</div>
				<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
				<button style="color:black;background-color: white;"><img src="images/good.png"
						style="height:25px">추천</button>
			</div>
		</div>
		<hr>
		<div class="comment_wrapper">
			<div class="comment_count_row">
				<div class="comment_count_row_left">
					<span style="font-size: 14px;">댓글</span> <span style="font-size: 14px;"
						th:text="${contents.comments.size}">12개</span>
				</div>
			</div>
			<div class="comment_count_row">
				<form action="commentWrite" method="post">
					<input type="text" name="coContent" placeholder="댓글을 입력해 주세요">
					<input type="hidden" name="commentId" th:value="0">
					<input type="hidden" name="boardId" th:value="${seq}">
					<input type="hidden" name="email" th:value="${session.loginEmail}">
					<button>댓글작성</button>
				</form>
			</div>
			<br><br>
			<div class="comment_view_row">
				<div class="comment_view_normal">
					<table class="comment_table">
						<th:block th:each="comment:${comments}">
							<tr class="comment_element_parent">
								<td class="user">
									<strong style="float:left;" th:text="${comment.commentwriter}">태현</strong>
									<span style="float:right"
										th:text="${#temporals.format(comment.rdate,'yy/MM/dd HH:mm')}">23/01/01</span><br>
									<span style="float:left;" th:text="${comment.coContext}">깃태식이 발표 잘하네</span><br>
									<span></span>
									
									<button class="recommentsWriteboxButton"
										style="float:left; margin-top:1%;">답글</button>
									
									<div class="recommentsWritebox">
										<form action="recommentWrite" method="post">
											<input type="text" name="recoContent">
											<input type="hidden" name="recommentId" th:value="0">
											<input type="hidden" name="commentId" th:value="${comment.commentId}">
											<input type="hidden" name="email" th:value="${session.loginEmail}">
											<button>대댓글작성</button>
										</form>
									</div>
									<form action="deletComment" method="post">
										<input type="hidden" name="commentId" th:value="${comment.commentId}">
										<button th:if="${session.loginEmail==comment.email}" style="float:left; margin-top:1%;">삭제</button>
									</form>
									
								</td>
							</tr>
							<tr class="comment_element_child" th:each="recom:${comment.recomments}">
								<td class="user" style="background-color: rgb(242,242,242);">
									<strong style="float:left; margin-left:5%"
										th:text="${recom.recommentWriter}">대원</strong>
									<span style="float:right"
										th:text="${#temporals.format(recom.rdate,'yy/MM/dd HH:mm')}">23/01/01</span><br>
									<span style="float:left; margin-left:5%" th:text="${recom.recoContext}">ㄹㅇ 깃태식이 발표
										잘하네</span><br>
										<form action="deletReComment" method="post">
											<input type="hidden" name="recommentId" th:value="${recom.recommentId}">
											<button th:if="${session.loginEmail==recom.email}" style="float:left; margin-top:1%;">삭제</button>
										</form>
									
								</td>
							</tr>
						</th:block>
					</table>
				</div>
			</div>
			<hr>
		</div>
		<div class="content_bottom_button">
			<button>목 록</button> |
			<button>이전글</button> |
			<button>다음글</button>
		</div>
		<hr>
		</div>
		<hr style="margin-bottom:5px">
	</article>
	<article th:replace="~{board :: boardFragment}"></article>
	<script>
		const recommentsWritebox = document.querySelectorAll('.recommentsWritebox');
		const recommentsWriteboxButton = document.querySelectorAll('.recommentsWriteboxButton');
		for(let i=0;recommentsWriteboxButton.length;i++){
			recommentsWriteboxButton[i].addEventListener('click', () => recommentsWritebox[i].classList.toggle('show'));
		}
	</script>
	<div class="parallax_back_layer2"></div>
</body>

</html>